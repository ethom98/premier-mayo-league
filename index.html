<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Premier Mayo League — Custom H2H</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
    h1 { margin-top: 0; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; }
    .card { border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; box-shadow: 0 1px 2px rgba(0,0,0,0.04); background:#fff; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 8px; border-bottom: 1px solid #e5e7eb; text-align: left; }
    th { background: #f9fafb; }
    .muted { color: #6b7280; font-size: 12px; }
    .row { margin: 16px 0; display:flex; gap:12px; align-items:center;}
    input, select, button { padding: 8px 10px; border-radius: 8px; border: 1px solid #e5e7eb; }
    button { cursor: pointer; }
  </style>
</head>
<body>
  <h1>Premier Mayo League — Custom H2H</h1>
  <div class="muted">This site reads JSON in <code>/data</code> generated by the GitHub Action that runs <code>fpl_h2h.py</code>.</div>

  <div class="row">
    <label>Gameweek:
      <input type="number" id="gw" value="1" min="1" style="width:90px">
    </label>
    <button onclick="loadGW()">Load</button>
  </div>

  <div class="grid">
    <div class="card">
      <h3>Results</h3>
      <table id="results"><thead><tr><th>Match</th><th>Score</th><th>Status</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="card">
      <h3>Standings</h3>
      <table id="table"><thead><tr><th>Team</th><th>P</th><th>W</th><th>D</th><th>L</th><th>PF</th><th>PA</th><th>Pts</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="card">
      <h3>Schedule</h3>
      <table id="schedule"><thead><tr><th>GW</th><th>Home</th><th>Away</th></tr></thead><tbody></tbody></table>
    </div>
  </div>

<script>
async function loadGW() {
  const gw = document.getElementById('gw').value;
  const [sched, results, standings] = await Promise.all([
    fetch('data/schedule.json').then(r=>r.json()),
    fetch(`data/gw_${gw}_results.json`).then(r=>r.json()).catch(_=>({gw, matches:[], note:"No results yet"})),
    fetch('data/standings.json').then(r=>r.json()).catch(_=>({teams:[]}))
  ]);

  // schedule
  const sbody = document.querySelector('#schedule tbody');
  sbody.innerHTML = '';
  for (const m of sched.matches) {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${m.gw}</td><td>${m.home_name}</td><td>${m.away_name}</td>`;
    sbody.appendChild(tr);
  }

  // results
  const rbody = document.querySelector('#results tbody');
  rbody.innerHTML = '';
  for (const m of results.matches || []) {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${m.home_name} vs ${m.away_name}</td>
                    <td>${m.home_points} - ${m.away_points}</td>
                    <td>${m.status || ''}</td>`;
    rbody.appendChild(tr);
  }

  // standings
  const tbody = document.querySelector('#table tbody');
  tbody.innerHTML = '';
  for (const t of standings.teams || []) {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${t.name}</td><td>${t.played}</td><td>${t.wins}</td><td>${t.draws}</td>
                    <td>${t.losses}</td><td>${t.points_for}</td><td>${t.points_against}</td><td>${t.points}</td>`;
    tbody.appendChild(tr);
  }
}
loadGW();
</script>
</body>
</html>
